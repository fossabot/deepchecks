<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap"><title data-react-helmet="true">deepchecks.checks.distribution package | Deepchecks</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.deepchecks.com/docs/api-reference/deepchecks.checks.distribution/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="deepchecks.checks.distribution package | Deepchecks"><meta data-react-helmet="true" name="description" content="Submodules"><meta data-react-helmet="true" property="og:description" content="Submodules"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.deepchecks.com/docs/api-reference/deepchecks.checks.distribution/"><link data-react-helmet="true" rel="alternate" href="https://docs.deepchecks.com/docs/api-reference/deepchecks.checks.distribution/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.deepchecks.com/docs/api-reference/deepchecks.checks.distribution/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.e21e632f.css">
<link rel="preload" href="/assets/js/runtime~main.5be89454.js" as="script">
<link rel="preload" href="/assets/js/main.e68d1a3d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-light.svg" alt="Package Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo-dark.svg" alt="Package Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title"></b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://deepcheckscommunity.slack.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Slack<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://stackoverflow.com/questions/tagged/deepchecks" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/deepchecks/deepchecks/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Github Issues<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><a href="https://deepchecks.com/blog/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://github.com/deepchecks/deepchecks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ğŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ğŸŒ</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro/">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">api-reference</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/deepchecks.base/">deepchecks.base package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/api-reference/deepchecks.checks.distribution/">deepchecks.checks.distribution package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/deepchecks.checks.integrity/">deepchecks.checks.integrity package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/deepchecks.checks/">deepchecks.checks package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/deepchecks.checks.methodology/">deepchecks.checks.methodology package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/deepchecks.checks.overview/">deepchecks.checks.overview package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/deepchecks.checks.performance/">deepchecks.checks.performance package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/deepchecks/">deepchecks package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/deepchecks.suites/">deepchecks.suites package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/deepchecks.utils/">deepchecks.utils package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-reference/modules/">deepchecks</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>deepchecks.checks.distribution package</h1></header><h2 class="anchor anchorWithStickyNavbar_31ik" id="submodules">Submodules<a aria-hidden="true" class="hash-link" href="#submodules" title="Direct link to heading">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_31ik" id="deepcheckschecksdistributionplot-module">deepchecks.checks.distribution.plot module<a aria-hidden="true" class="hash-link" href="#deepcheckschecksdistributionplot-module" title="Direct link to heading">â€‹</a></h2><p>A module containing utils for plotting distributions.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="plot_densitydata-xs-colorb-alpha-float--07-kwargs">plot_density(data, xs, color=&#x27;b&#x27;, alpha: float = 0.7, <!-- -->*<!-- -->*<!-- -->kwargs)<a aria-hidden="true" class="hash-link" href="#plot_densitydata-xs-colorb-alpha-float--07-kwargs" title="Direct link to heading">â€‹</a></h3><p>Plot a KDE density plot of the data. Adding labels and other plotting attributes is left to ths user.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>(**</strong>)*<em> (</em>color*) â€“ The data used to compute the pdf function.</p></li><li><p><strong>xs</strong> (<em>iterable</em>) â€“ List of x values to plot the computed pdf for.</p></li><li><p><strong>(**</strong>)** â€“ Color of the filled graph.</p></li><li><p><strong>alpha</strong> (<em>float</em>) â€“ Transparency of the filled graph.</p></li></ul></li><li><p><strong>Returns</strong></p><p>  The computed pdf values at the points xs.</p></li><li><p><strong>Return type</strong></p><p>  np.array</p></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="deepcheckschecksdistributionpreprocessing-module">deepchecks.checks.distribution.preprocessing module<a aria-hidden="true" class="hash-link" href="#deepcheckschecksdistributionpreprocessing-module" title="Direct link to heading">â€‹</a></h2><p>Module of preprocessing functions.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="preprocess_dataset_to_scaled_numericsbaseline_features-pandascoreframedataframe-test_features-pandascoreframedataframe-categorical_columns-liststr-max_num_categories">preprocess_dataset_to_scaled_numerics(baseline_features: pandas.core.frame.DataFrame, test_features: pandas.core.frame.DataFrame, categorical_columns: List<!-- -->[str]<!-- -->, max_num_categories)<a aria-hidden="true" class="hash-link" href="#preprocess_dataset_to_scaled_numericsbaseline_features-pandascoreframedataframe-test_features-pandascoreframedataframe-categorical_columns-liststr-max_num_categories" title="Direct link to heading">â€‹</a></h3><p>Preprocess given features to scaled numerics.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>baseline_features</strong> (<em>DataFrame</em>) â€“ Will be used for fit and also transformed. Expect to get only features</p></li><li><p><strong>test_features</strong> (<em>DataFrame</em>) â€“ Will be transformed according to baseline_data. Expect to get only features</p></li><li><p><strong>categorical_columns</strong> (<em>List<strong>[</strong>str**]</em>) â€“ Indicates names of categorical columns in both DataFrames.</p></li><li><p><strong>max_num_categories</strong> (<em>int</em>) â€“ Indicates the maximum number of unique categories in a single categorical column
(rare categories will be changed to a form of â€œotherâ€)</p></li></ul></li><li><p><strong>Returns</strong></p><p>  returns both datasets transformed.</p></li><li><p><strong>Return type</strong></p><p>  (DataFrame, DataFrame)</p></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="deepcheckschecksdistributionrare_category_encoder-module">deepchecks.checks.distribution.rare_category_encoder module<a aria-hidden="true" class="hash-link" href="#deepcheckschecksdistributionrare_category_encoder-module" title="Direct link to heading">â€‹</a></h2><p>Module of RareCategoryEncoder.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="class-rarecategoryencoder">class RareCategoryEncoder()<a aria-hidden="true" class="hash-link" href="#class-rarecategoryencoder" title="Direct link to heading">â€‹</a></h3><p>Bases: <code>object</code></p><p>Encodes rare categories into an â€œotherâ€ parameter.</p><p>Note that this encoder assumes data is received as a DataFrame.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>max_num_categories</strong> (<em>int</em>) â€“ Indicates the maximum number of unique categories in a single categorical column
(rare categories will be changed to a form of â€œotherâ€)</p></li><li><p><strong>cols</strong> (<em>List<strong>[</strong>str**]</em>) â€“ Columns to limit the encoder to work on. If non are given will work on all columns given
in fit</p></li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="default_other_value--other_rare_category">DEFAULT_OTHER_VALUE( = &#x27;OTHER_RARE_CATEGORY&#x27;)<a aria-hidden="true" class="hash-link" href="#default_other_value--other_rare_category" title="Direct link to heading">â€‹</a></h4><h4 class="anchor anchorWithStickyNavbar_31ik" id="__init__max_num_categories-int--10-cols-optionalliststr--none">_<!-- -->_init__(max_num_categories: int = 10, cols: Optional[List<!-- -->[str]<!-- -->] = None)<a aria-hidden="true" class="hash-link" href="#__init__max_num_categories-int--10-cols-optionalliststr--none" title="Direct link to heading">â€‹</a></h4><h4 class="anchor anchorWithStickyNavbar_31ik" id="fitdata-pandascoreframedataframe">fit(data: pandas.core.frame.DataFrame)<a aria-hidden="true" class="hash-link" href="#fitdata-pandascoreframedataframe" title="Direct link to heading">â€‹</a></h4><p>Fit the encoder using given dataframe.</p><ul><li><p><strong>Parameters</strong></p><p>  <strong>data</strong> (<em>DataFrame</em>) â€“ data to fit from</p></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="fit_transformdata-pandascoreframedataframe">fit_transform(data: pandas.core.frame.DataFrame)<a aria-hidden="true" class="hash-link" href="#fit_transformdata-pandascoreframedataframe" title="Direct link to heading">â€‹</a></h4><p>Run fit and transform on given data.</p><ul><li><p><strong>Parameters</strong></p><p>  <strong>data</strong> (<em>DataFrame</em>) â€“ data to fit on and transform</p></li><li><p><strong>Returns</strong></p><p>  transformed data</p></li><li><p><strong>Return type</strong></p><p>  (DataFrame)</p></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="transformdata-pandascoreframedataframe">transform(data: pandas.core.frame.DataFrame)<a aria-hidden="true" class="hash-link" href="#transformdata-pandascoreframedataframe" title="Direct link to heading">â€‹</a></h4><p>Transform given data according to columns processed in fit.</p><ul><li><p><strong>Parameters</strong></p><p>  <strong>data</strong> (<em>DataFrame</em>) â€“ data to transform</p></li><li><p><strong>Returns</strong></p><p>  transformed data</p></li><li><p><strong>Return type</strong></p><p>  (DataFrame)</p></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="deepcheckschecksdistributiontrain_test_drift-module">deepchecks.checks.distribution.train_test_drift module<a aria-hidden="true" class="hash-link" href="#deepcheckschecksdistributiontrain_test_drift-module" title="Direct link to heading">â€‹</a></h2><p>Module contains Train Test Drift check.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="class-traintestdrift">class TrainTestDrift()<a aria-hidden="true" class="hash-link" href="#class-traintestdrift" title="Direct link to heading">â€‹</a></h3><p>Bases: <code>deepchecks.base.check.TrainTestBaseCheck</code></p><p>Calculate drift between train dataset and test dataset.</p><p>Check calculates a drift score for each column in test dataset, by comparing its distribution to the train
dataset.
For numerical columns, we use the Earth Movers Distance.
See <a href="https://www.lexjansen.com/wuss/2017/47_Final_Paper_PDF.pdf" target="_blank" rel="noopener noreferrer">https://www.lexjansen.com/wuss/2017/47_Final_Paper_PDF.pdf</a>
For categorical columns, we use the Population Stability Index (PSI).
See <a href="https://en.wikipedia.org/wiki/Wasserstein_metric" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Wasserstein_metric</a>.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>columns</strong> (<em>Union<strong>[</strong>str<strong>, </strong>Iterable<strong>[</strong>str<strong>]</strong>]</em>) â€“ Columns to check, if none are given checks all columns except ignored</p></li><li><p><strong>ones.</strong> â€“ </p></li><li><p><strong>ignore_columns</strong> (<em>Union<strong>[</strong>str<strong>, </strong>Iterable<strong>[</strong>str<strong>]</strong>]</em>) â€“ Columns to ignore, if none given checks based on columns</p></li><li><p><strong>variable.</strong> â€“ </p></li><li><p><strong>n_top_columns</strong> (<em>int</em>) â€“ (optional - used only if model was specified)
amount of columns to show ordered by feature importance (date, index, label are first)</p></li><li><p><strong>sort_feature_by</strong> (<em>str</em>) â€“ Indicates how features will be sorted. Can be either â€œfeature importanceâ€
or â€œdrift scoreâ€</p></li><li><p><strong>max_num_categories</strong> (<em>int</em>) â€“ Only for categorical columns. Max number of allowed categories. If there are more,
they are binned into an â€œOtherâ€ category. If max_num_categories=None, there is no limit.</p></li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="__init__columns-optionalunionstr-iterablestr--none-ignore_columns-optionalunionstr-iterablestr--none-n_top_columns-int--5-sort_feature_by-str--feature-importance-max_num_categories-int--10">_<!-- -->_init__(columns: Optional[Union[str, Iterable<!-- -->[str]<!-- -->]] = None, ignore_columns: Optional[Union[str, Iterable<!-- -->[str]<!-- -->]] = None, n_top_columns: int = 5, sort_feature_by: str = &#x27;feature importance&#x27;, max_num_categories: int = 10)<a aria-hidden="true" class="hash-link" href="#__init__columns-optionalunionstr-iterablestr--none-ignore_columns-optionalunionstr-iterablestr--none-n_top_columns-int--5-sort_feature_by-str--feature-importance-max_num_categories-int--10" title="Direct link to heading">â€‹</a></h4><h4 class="anchor anchorWithStickyNavbar_31ik" id="add_condition_drift_score_not_greater_thanmax_allowed_psi_score-float--02-max_allowed_earth_movers_score-float--01-number_of_top_features_to_consider-int--5">add_condition_drift_score_not_greater_than(max_allowed_psi_score: float = 0.2, max_allowed_earth_movers_score: float = 0.1, number_of_top_features_to_consider: int = 5)<a aria-hidden="true" class="hash-link" href="#add_condition_drift_score_not_greater_thanmax_allowed_psi_score-float--02-max_allowed_earth_movers_score-float--01-number_of_top_features_to_consider-int--5" title="Direct link to heading">â€‹</a></h4><p>Add condition - require drift score to not be more than a certain threshold.</p><p>The industry standard for PSI limit is above 0.2.
Earth movers does not have a common industry standard.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>max_allowed_psi_score</strong> â€“ the max threshold for the PSI score</p></li><li><p><strong>max_allowed_earth_movers_score</strong> â€“ the max threshold for the Earth Moverâ€™s Distance score</p></li><li><p><strong>number_of_top_features_to_consider</strong> â€“ the number of top features for which exceed the threshold will fail the
condition.</p></li></ul></li><li><p><strong>Returns</strong></p><p>  False if any column has passed the max threshold, True otherwise</p></li><li><p><strong>Return type</strong></p><p>  ConditionResult</p></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="runtrain_dataset-test_dataset-modelnone">run(train_dataset, test_dataset, model=None)<a aria-hidden="true" class="hash-link" href="#runtrain_dataset-test_dataset-modelnone" title="Direct link to heading">â€‹</a></h4><p>Run check.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>train_dataset</strong> (<em>Dataset</em>) â€“ The training dataset object. Must contain a label column.</p></li><li><p><strong>test_dataset</strong> (<em>Dataset</em>) â€“ The test dataset object. Must contain a label column.</p></li><li><p><strong>model</strong> â€“ A scikit-learn-compatible fitted estimator instance</p></li></ul></li><li><p><strong>Returns</strong></p><p>  value: dictionary of column name to drift score.
display: distribution graph for each column, comparing the train and test distributions.</p></li><li><p><strong>Return type</strong></p><p>  CheckResult</p></li><li><p><strong>Raises</strong></p><p>  <strong>DeepchecksValueError</strong> â€“ If the object is not a Dataset or DataFrame instance</p></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="deepcheckschecksdistributiontrust_score-module">deepchecks.checks.distribution.trust_score module<a aria-hidden="true" class="hash-link" href="#deepcheckschecksdistributiontrust_score-module" title="Direct link to heading">â€‹</a></h2><p>Module of trust score confidence method.</p><p>Code is taken from <a href="https://github.com/google/TrustScore" target="_blank" rel="noopener noreferrer">https://github.com/google/TrustScore</a>
Based on: arXiv:1805.11783 <!-- -->[stat.ML]</p><p>Used according to the following License:</p><p>Licensed under the Apache License, Version 2.0 (the â€œLicenseâ€);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p><blockquote><p><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer">http://www.apache.org/licenses/LICENSE-2.0</a></p></blockquote><p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an â€œAS ISâ€ BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="class-trustscore">class TrustScore()<a aria-hidden="true" class="hash-link" href="#class-trustscore" title="Direct link to heading">â€‹</a></h3><p>Bases: <code>object</code></p><p>Calculate trust score.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>k_filter</strong> (<em>int</em>) â€“ Number of neighbors used during either kNN distance or probability filtering.</p></li><li><p><strong>alpha</strong> (<em>float</em>) â€“ Fraction of instances to filter out to reduce impact of outliers.</p></li><li><p><strong>filter_type</strong> (<em>str</em>) â€“ Filter method; either â€˜distance_knnâ€™ or â€˜probability_knnâ€™</p></li><li><p><strong>leaf_size</strong> (<em>int</em>) â€“ Number of points at which to switch to brute-force. Affects speed and memory required to
build trees. Memory to store the tree scales with n_samples / leaf_size.</p></li><li><p><strong>metric</strong> (<em>str</em>) â€“ Distance metric used for the tree. See sklearnâ€™s DistanceMetric class for a list of available
metrics.</p></li><li><p><strong>dist_filter_type</strong> (<em>str</em>) â€“ Use either the distance to the k-nearest point (dist_filter_type = â€˜pointâ€™) or
the average distance from the first to the k-nearest point in the data
(dist_filter_type = â€˜meanâ€™).</p></li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="__init__k_filter-int--10-alpha-float--00-filter_type-str--distance_knn-leaf_size-int--40-metric-str--euclidean-dist_filter_type-str--point">_<!-- -->_init__(k_filter: int = 10, alpha: float = 0.0, filter_type: str = &#x27;distance_knn&#x27;, leaf_size: int = 40, metric: str = &#x27;euclidean&#x27;, dist_filter_type: str = &#x27;point&#x27;)<a aria-hidden="true" class="hash-link" href="#__init__k_filter-int--10-alpha-float--00-filter_type-str--distance_knn-leaf_size-int--40-metric-str--euclidean-dist_filter_type-str--point" title="Direct link to heading">â€‹</a></h4><h4 class="anchor anchorWithStickyNavbar_31ik" id="filter_by_distance_knnx-numpyndarray">filter_by_distance_knn(X: numpy.ndarray)<a aria-hidden="true" class="hash-link" href="#filter_by_distance_knnx-numpyndarray" title="Direct link to heading">â€‹</a></h4><p>Filter out instances with low kNN density.</p><p>Calculate distance to k-nearest point in the data for each instance and remove instances above a cutoff
distance.</p><ul><li><p><strong>Parameters</strong></p><p>  <strong>X</strong> (<em>np.ndarray</em>) â€“ Data to filter</p></li><li><p><strong>Returns</strong></p><p>  Filtered data</p></li><li><p><strong>Return type</strong></p><p>  (np.ndarray)</p></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="filter_by_probability_knnx-numpyndarray-y-numpyndarray">filter_by_probability_knn(X: numpy.ndarray, Y: numpy.ndarray)<a aria-hidden="true" class="hash-link" href="#filter_by_probability_knnx-numpyndarray-y-numpyndarray" title="Direct link to heading">â€‹</a></h4><p>Filter out instances with high label disagreement amongst its k nearest neighbors.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>X</strong> (<em>np.ndarray</em>) â€“ Data</p></li><li><p><strong>Y</strong> (<em>np.ndarray</em>) â€“ Predicted class labels</p></li></ul></li><li><p><strong>Returns</strong></p><p>  Filtered data and labels.</p></li><li><p><strong>Return type</strong></p><p>  (np.ndarray, np.ndarray)</p></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="fitx-numpyndarray-y-numpyndarray">fit(X: numpy.ndarray, Y: numpy.ndarray)<a aria-hidden="true" class="hash-link" href="#fitx-numpyndarray-y-numpyndarray" title="Direct link to heading">â€‹</a></h4><p>Build KDTrees for each prediction class.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>X</strong> (<em>np.ndarray</em>) â€“ Data.</p></li><li><p><strong>Y</strong> (<em>np.ndarray</em>) â€“ Target labels, either one-hot encoded or the actual class label.</p></li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="static-process_confidence_scoresbaseline_scores-numpyndarray-test_scores-numpyndarray">static process_confidence_scores(baseline_scores: numpy.ndarray, test_scores: numpy.ndarray)<a aria-hidden="true" class="hash-link" href="#static-process_confidence_scoresbaseline_scores-numpyndarray-test_scores-numpyndarray" title="Direct link to heading">â€‹</a></h4><p>Process confidence scores.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="scorex-numpyndarray-y-numpyndarray-k-int--2-dist_type-str--point">score(X: numpy.ndarray, Y: numpy.ndarray, k: int = 2, dist_type: str = &#x27;point&#x27;)<a aria-hidden="true" class="hash-link" href="#scorex-numpyndarray-y-numpyndarray-k-int--2-dist_type-str--point" title="Direct link to heading">â€‹</a></h4><p>Calculate trust scores.</p><p>ratio of distance to closest class other than the predicted class to distance to predicted class.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>X</strong> (<em>np.ndarray</em>) â€“ Instances to calculate trust score for.</p></li><li><p><strong>Y</strong> (<em>np.ndarray</em>) â€“ Either prediction probabilities for each class or the predicted class.</p></li><li><p><strong>k</strong> (<em>int</em>) â€“ Number of nearest neighbors used for distance calculation.</p></li><li><p><strong>dist_type</strong> (<em>str</em>) â€“ Use either the distance to the k-nearest point (dist_type = â€˜pointâ€™) or the average
distance from the first to the k-nearest point in the data (dist_type = â€˜meanâ€™).</p></li></ul></li><li><p><strong>Returns</strong></p><p>  Batch with trust scores and the closest not predicted class.</p></li><li><p><strong>Return type</strong></p><p>  (np.ndarray, np.ndarray)</p></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="deepcheckschecksdistributiontrust_score_comparison-module">deepchecks.checks.distribution.trust_score_comparison module<a aria-hidden="true" class="hash-link" href="#deepcheckschecksdistributiontrust_score_comparison-module" title="Direct link to heading">â€‹</a></h2><p>Module of trust score comparison check.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="class-trustscorecomparison">class TrustScoreComparison()<a aria-hidden="true" class="hash-link" href="#class-trustscorecomparison" title="Direct link to heading">â€‹</a></h3><p>Bases: <code>deepchecks.base.check.TrainTestBaseCheck</code></p><p>Compares the modelâ€™s trust scores of the train dataset with scores of the test dataset.</p><p>The process is as follows:
<!-- -->*<!-- --> Pre-process the train and test data into scaled numerics.
<!-- -->*<!-- --> Train a TrustScore (<a href="https://arxiv.org/abs/1805.11783" target="_blank" rel="noopener noreferrer">https://arxiv.org/abs/1805.11783</a>) regressor based on train data + label.
<!-- -->*<!-- --> Predict on test data using the model.
<!-- -->*<!-- --> Use TrustScore to score the prediction of the model.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>k_filter</strong> (<em>int</em>) â€“ used in TrustScore (Number of neighbors used during either kNN distance or probability
filtering)</p></li><li><p><strong>alpha</strong> (<em>float</em>) â€“ used in TrustScore (Fraction of instances to filter out to reduce impact of outliers)</p></li><li><p><strong>max_number_categories</strong> (<em>int</em>) â€“ Indicates the maximum number of unique categories in a single categorical
column (rare categories will be changed to a form of â€œotherâ€)</p></li><li><p><strong>min_test_samples</strong> (<em>int</em>) â€“ Minimal number of samples in train data to be able to run this check</p></li><li><p><strong>sample_size</strong> (<em>int</em>) â€“ Number of samples to use for the check for train and test. if dataset contains less than
sample_size than all the dataset will be used.</p></li><li><p><strong>random_state</strong> (<em>int</em>) â€“ The random state to use for sampling.</p></li><li><p><strong>n_to_show</strong> (<em>int</em>) â€“ Number of samples to show of worst and best trust score.</p></li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="__init__k_filter-int--10-alpha-float--0001-max_number_categories-int--10-min_test_samples-int--300-sample_size-int--10000-random_state-int--42-n_to_show-int--5-percent_top_scores_to_hide-float--001">_<!-- -->_init__(k_filter: int = 10, alpha: float = 0.001, max_number_categories: int = 10, min_test_samples: int = 300, sample_size: int = 10000, random_state: int = 42, n_to_show: int = 5, percent_top_scores_to_hide: float = 0.01)<a aria-hidden="true" class="hash-link" href="#__init__k_filter-int--10-alpha-float--0001-max_number_categories-int--10-min_test_samples-int--300-sample_size-int--10000-random_state-int--42-n_to_show-int--5-percent_top_scores_to_hide-float--001" title="Direct link to heading">â€‹</a></h4><h4 class="anchor anchorWithStickyNavbar_31ik" id="add_condition_mean_score_percent_decline_not_greater_thanthreshold-float--02">add_condition_mean_score_percent_decline_not_greater_than(threshold: float = 0.2)<a aria-hidden="true" class="hash-link" href="#add_condition_mean_score_percent_decline_not_greater_thanthreshold-float--02" title="Direct link to heading">â€‹</a></h4><p>Add condition.</p><p>Percent of decline between the mean trust score of train and the mean trust score of test is not above
given threshold.</p><ul><li><p><strong>Parameters</strong></p><p>  <strong>threshold</strong> (<em>float</em>) â€“ Maximum percentage decline allowed (value 0 and above)</p></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="runtrain_dataset-test_dataset-modelnone-1">run(train_dataset, test_dataset, model=None)<a aria-hidden="true" class="hash-link" href="#runtrain_dataset-test_dataset-modelnone-1" title="Direct link to heading">â€‹</a></h4><p>Run check.</p><ul><li><p><strong>Parameters</strong></p><ul><li><p><strong>train_dataset</strong> (<em>Dataset</em>) â€“ Dataset to use for TrustScore regressor</p></li><li><p><strong>test_dataset</strong> (<em>Dataset</em>) â€“ Dataset to check for trust score</p></li><li><p><strong>model</strong> â€“ Model used to predict on the validation dataset</p></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="module-contents">Module contents<a aria-hidden="true" class="hash-link" href="#module-contents" title="Direct link to heading">â€‹</a></h2><p>Module containing all data distribution checks.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/api-reference/deepchecks.base/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->deepchecks.base package</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/api-reference/deepchecks.checks.integrity/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">deepchecks.checks.integrity package<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#submodules" class="table-of-contents__link toc-highlight">Submodules</a></li><li><a href="#deepcheckschecksdistributionplot-module" class="table-of-contents__link toc-highlight">deepchecks.checks.distribution.plot module</a><ul><li><a href="#plot_densitydata-xs-colorb-alpha-float--07-kwargs" class="table-of-contents__link toc-highlight">plot_density(data, xs, color=&#39;b&#39;, alpha: float = 0.7, **kwargs)</a></li></ul></li><li><a href="#deepcheckschecksdistributionpreprocessing-module" class="table-of-contents__link toc-highlight">deepchecks.checks.distribution.preprocessing module</a><ul><li><a href="#preprocess_dataset_to_scaled_numericsbaseline_features-pandascoreframedataframe-test_features-pandascoreframedataframe-categorical_columns-liststr-max_num_categories" class="table-of-contents__link toc-highlight">preprocess_dataset_to_scaled_numerics(baseline_features: pandas.core.frame.DataFrame, test_features: pandas.core.frame.DataFrame, categorical_columns: Liststr, max_num_categories)</a></li></ul></li><li><a href="#deepcheckschecksdistributionrare_category_encoder-module" class="table-of-contents__link toc-highlight">deepchecks.checks.distribution.rare_category_encoder module</a><ul><li><a href="#class-rarecategoryencoder" class="table-of-contents__link toc-highlight">class RareCategoryEncoder()</a></li></ul></li><li><a href="#deepcheckschecksdistributiontrain_test_drift-module" class="table-of-contents__link toc-highlight">deepchecks.checks.distribution.train_test_drift module</a><ul><li><a href="#class-traintestdrift" class="table-of-contents__link toc-highlight">class TrainTestDrift()</a></li></ul></li><li><a href="#deepcheckschecksdistributiontrust_score-module" class="table-of-contents__link toc-highlight">deepchecks.checks.distribution.trust_score module</a><ul><li><a href="#class-trustscore" class="table-of-contents__link toc-highlight">class TrustScore()</a></li></ul></li><li><a href="#deepcheckschecksdistributiontrust_score_comparison-module" class="table-of-contents__link toc-highlight">deepchecks.checks.distribution.trust_score_comparison module</a><ul><li><a href="#class-trustscorecomparison" class="table-of-contents__link toc-highlight">class TrustScoreComparison()</a></li></ul></li><li><a href="#module-contents" class="table-of-contents__link toc-highlight">Module contents</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Deepchecks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5be89454.js"></script>
<script src="/assets/js/main.e68d1a3d.js"></script>
</body>
</html>